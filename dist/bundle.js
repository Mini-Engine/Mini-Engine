!function(n){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=0)}([function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e);var i=function(){function i(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.canvas=void 0,this.ctx=void 0,this.mouse={position:{x:0,y:0},leftButtonPressed:!1,scrollButonPressed:!1,rightButtonPressed:!1},this.createCanvas(document.getElementById(t),e,n),this.ctx=this.canvas.getContext("2d")}var t,e,n;return t=i,(e=[{key:"createCanvas",value:function(t,e,n){this.canvas=document.createElement("canvas"),this.canvas.id="cmRaceCanvas",this.canvas.width=e,this.canvas.height=n,t.appendChild(this.canvas)}},{key:"run",value:function(){var e=this;this.canvas.addEventListener("mousemove",function(t){return e.updateMousePosition(t)},!1),this.canvas.addEventListener("mousedown",function(t){return e.updateMouseDown(t)}),this.canvas.addEventListener("mouseup",function(t){return e.updateMouseUp(t)}),this.gameLoop()}},{key:"updateMouseDown",value:function(t){this.mouse.leftButtonPressed=0===t.button,this.mouse.scrollButonPressed=1===t.button,this.mouse.rightButtonPressed=2===t.button}},{key:"updateMouseUp",value:function(t){this.mouse.leftButtonPressed=0!==t.button&&this.mouse.leftButtonPressed,this.mouse.scrollButonPressed=1!==t.button&&this.mouse.scrollButonPressed,this.mouse.rightButtonPressed=2!==t.button&&this.mouse.rightButtonPressed}},{key:"updateMousePosition",value:function(t){var e=this.canvas.getBoundingClientRect();this.mouse.position.x=t.clientX-e.left,this.mouse.position.y=t.clientY-e.top}},{key:"gameLoop",value:function(){var t=this;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),window.dispatchEvent(new CustomEvent("gameLoop",{detail:{canvasContext:this.ctx,mouse:this.mouse}})),window.requestAnimationFrame(function(){return t.gameLoop()})}}])&&o(t.prototype,e),n&&o(t,n),i}();function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function o(t,e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.circuit=void 0,this.circuitSpots=[],this.currentSpot=void 0,this.nextSpot=void 0,this.nextSpotIndex=0,this.sprite=new Image,this.position={x:0,y:0},this.speed=2,this.sprite.src=t,this.circuit=e,this.circuitSpots=e.spots,this.speed=n,window.addEventListener("gameLoop",function(t){i.gameLoop(t.detail.canvasContext)}),this.currentSpot=this.circuitSpots[this.nextSpotIndex],this.nextSpot=this.currentSpot,this.position.x=this.currentSpot.x,this.position.y=this.currentSpot.y}var t,e,n;return t=o,(e=[{key:"gameLoop",value:function(t){this.updateCurrentAndNextSpot(),this.moveVehicle(),t.drawImage(this.sprite,this.position.x,this.position.y)}},{key:"updateCurrentAndNextSpot",value:function(){var t=this.nextSpot.x-2,e=this.nextSpot.x+2,n=this.nextSpot.y-2,i=this.nextSpot.y+2;this.position.x>=t&&this.position.x<=e&&this.position.y>=n&&this.position.y<=i&&(this.currentSpot=this.circuitSpots[this.nextSpotIndex],this.nextSpotIndex=this.nextSpotIndex===this.circuitSpots.length-1?0:this.nextSpotIndex+1,this.nextSpot=this.circuitSpots[this.nextSpotIndex])}},{key:"moveVehicle",value:function(){var t=Math.atan2(this.nextSpot.y-this.position.y,this.nextSpot.x-this.position.x);this.position.x+=Math.cos(t)*this.speed,this.position.y+=Math.sin(t)*this.speed}}])&&s(t.prototype,e),n&&s(t,n),o}();function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mousePressed=!1,window.addEventListener("gameLoop",function(t){return e.gameLoop(t.detail.mouse)})}var e,n,i;return e=t,(n=[{key:"gameLoop",value:function(t){t.leftButtonPressed&&!1===this.mousePressed&&console.log(t.position),this.mousePressed=t.leftButtonPressed}}])&&a(e.prototype,n),i&&a(e,i),t}(),c=new function t(e,n,i,o){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sprite=new Image,this.spots=[],this.sprite.src=e,this.spots=o,window.addEventListener("gameLoop",function(t){return t.detail.canvasContext.drawImage(s.sprite,0,0,n,i)})}("image/sun-peak.png",800,400,[{x:330,y:240},{x:70,y:220},{x:330,y:200},{x:160,y:180},{x:240,y:135},{x:390,y:170},{x:450,y:120},{x:610,y:120},{x:500,y:240}]);new r("image/vehicle1.png",c,2),new r("image/vehicle2.png",c,1.8),new r("image/vehicle3.png",c,1.6),new u,new i("app",800,400).run()}]);